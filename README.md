# VKTex

VKTex - это расширение Chrome для отрисовки формул Tex во Вконтакте. Расширение рендерит формулы в сообщениях, постах, статьях и комментариях, при этом при редактировании сообщения формула отрендерится тут же, а для перересовки формулы в отредактированном комментарии необходимо обновить страницу.

Чтобы отрисовать формулу в текущем абзаце, используйте $$ \formula $$, а чтобы в новом - \\[ \formula \\].

### Текущая архитектура

Формулы рендерятся двояко: те, что указаны внутри двойного доллора, остаются. Что происходит со вторыми:

* Раз в секунду набираемый текст отправляется в popup
* Там он рендерится
* Текст еще раз отправляется в popup во время отправки. При этом поле ввода очищается
* Popup рендерит все необходимое. Далее начинается обмен сообщениями с помощью window.postMessage
* Popup отправляет текст или формулу
* ВК отправляет или первое, или второе
* По отправлению посылает запрос в popup
* Цикл повторяется

